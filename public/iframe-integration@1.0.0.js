(function(i,e){typeof exports=="object"&&typeof module<"u"?e(require("@iframe-resizer/parent")):typeof define=="function"&&define.amd?define(["@iframe-resizer/parent"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i.iframeResize))})(this,function(i){"use strict";(function(){if(typeof window>"u"||typeof document>"u")return;const e=document.currentScript;if(!e){console.error("Impossible de trouver l'élément de script courant");return}const m=e.dataset.simulateur||"demenagement-logement",f=e.dataset.height||"600px",r=e.dataset.log==="true",u=e.dataset.waitForLoad!=="false",o=e.dataset.containerId||"aides-simplifiees-iframe-container";let c;e.src.includes("localhost")?c="http://localhost:3000":c=new URL(e.src).origin;const s=new URL(`${c}/simulateurs/${m}`);s.searchParams.set("iframe","true"),s.searchParams.set("utm_source",`iframe@${window.location.hostname}`),s.searchParams.set("utm_term",window.location.pathname);const n=document.createElement("iframe"),d={id:"simulateur-aides",src:s.toString(),title:"Simulateur d'aides simplifiées",style:`border: none; width: 100%; display: block; height: ${f}; opacity: 0; transition: opacity 0.5s;`,loading:"lazy"};for(const t in d)n.setAttribute(t,d[t]);const l=document.getElementById(o);if(l)l.appendChild(n);else if(e.parentElement.tagName==="HEAD"){console.warn(`Container with id "${o}" not found. Creating fallback container.`);const t=document.createElement("div");t.id=o;const a=document.body||document.querySelector("body");a&&(a.appendChild(t),t.appendChild(n))}else console.warn(`Container with id "${o}" not found. Inserting iframe after script.`),e.insertAdjacentElement("afterend",n);i({license:"GPLv3",log:r?"collapsed":!1,checkOrigin:!1,scrolling:"auto",inPageLinks:!0,waitForLoad:u,onMessage(t){r&&console.log("Message from iframe:",t);const a=new CustomEvent("aides-simplifiees-message",{detail:t});window.dispatchEvent(a)},onReady(){n.style.opacity="1",r&&console.log("Iframe is ready");const t=new CustomEvent("aides-simplifiees-ready");window.dispatchEvent(t)}},n)})()});
